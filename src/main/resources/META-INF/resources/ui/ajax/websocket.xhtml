<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="jakarta.faces.facelets"
                xmlns:h="jakarta.faces.html"
                xmlns:f="jakarta.faces.core"
                xmlns:p="primefaces"
                template="/template/template.xhtml">

    <ui:define name="title">
        Ajax Framework <span class="subitem">WebSocket</span>
    </ui:define>

    <ui:define name="description">
        WebSocket allows server side push events.
    </ui:define>

    <ui:define name="implementation">
        <div class="card">
            <h:form id="frmSocket">
                <f:websocket scope="view" channel="pushChannel" onmessage="function(m){console.log(m);}">
                    <f:ajax event="quarkusMessage" render="frmSocket:txt_count"/>
                </f:websocket>
                <h1 class="text-center">
                    <h:outputText id="txt_count" value="#{webSocketView.count}"/>
                </h1>
                <p:commandButton value="Test" actionListener="#{webSocketView.sendMessage()}" process="@this"/>
            </h:form>
        </div>
    </ui:define>

</ui:composition>